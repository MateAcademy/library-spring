create table Person
(
person_id bigint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
name      varchar                            NOT NULL UNIQUE,
age       int CHECK ( age > 0) NOT NULL
);

drop table Person CASCADE ;

create table Book
(
book_id bigint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
person_id bigint references Person (person_id) on DELETE CASCADE,
name      varchar                       NOT NULL,
author    varchar                       NOT NULL,
year      int CHECK ( Book.year > 1900) NOT NULL,
unique (name, author)
);

select * from book;

insert into Person (name, age) values ('Иванов Иван Иванович', 1970);
insert into Person (name, age) values ('Петров Петр Петрович', 1960);
insert into Person (name, age) values ('Алексеев Алексей Алексеевич', 1989);
insert into Person (name, age) values ('Познер владимир Владимирович', 1944);
insert into Person (name, age) values ('Федоров Мирон Янович', 1985);

insert into book(name, author, year) values ('Над пропастью во ржи', 'Джером Сэлинджер', 1951);
insert into book(name, author, year) values ('День опричника', 'Владимир Сорокин', 2006);
insert into book(name, author, year) values ('Тайные виды на гору Фудзи', 'Владимир Пелевин', 2018);
insert into book(name, author, year) values ('Философия Java', 'Брюс Эккель', 2018);
insert into book(name, author, year) values ('Психопатология обыденной жизни', 'Фрейд Зигмунд', 1904);
insert into book(name, author, year) values ('Игра в бисер', 'Герман Гессе', 1943);
insert into book(name, author, year) values ('Бытие и время', 'Мартин Хайдеггер', 1927);

SELECT * FROM person p left join "book" b on p.person_id = b.person_id WHERE p.person_id = 1;

----------------------------------------------------------------------

CREATE TABLE film
(
id INT NOT NULL generated by default as identity primary key,
name varchar(50) not null,
genre varchar(100) not null,
description varchar(100) not null
);

CREATE TABLE director
(
d_id INT NOT NULL generated by default as identity primary key,
a_name varchar(50) not null

);

CREATE TABLE film_has_director
(
id INT NOT NULL,
d_id INT NOT NULL,
foreign key (id) references film(id),
foreign key (d_id) references director(d_id)
);